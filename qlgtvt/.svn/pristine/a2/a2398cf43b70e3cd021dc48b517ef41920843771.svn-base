<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2018.
  ~ Author : Phat Thinh
  -->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="vn.worklife.user.mockup.service.FileAttachmentService">
    <resultMap id="TiepDinhKemVO" type="TiepDinhKemVO">
        <result property="idTiepDinhKem" column="id"/>
        <result property="idParent" column="parentid"/>
        <result property="loaiTaiLieu" column="loaitailieu"/>
        <result property="tenTiep" column="ten"/>
        <result property="doDai" column="dodai"/>
        <result property="noiDung" column="noidung"/>
    </resultMap>

    <select id="selectAttachedFileNameByWYG" resultMap="TiepDinhKemVO">
        SELECT
            tdk.ten
            ,tdk.id
        FROM tepdinhkem tdk
            JOIN baocao_suco bcsc on tdk.parentid = bcsc.idbaocao
        WHERE bcsc.idgroup = #{baoCaoSuCoVO.idGroup}
              AND bcsc.tuan = #{baoCaoSuCoVO.tuan}
              AND bcsc.nam = #{baoCaoSuCoVO.nam}
              AND tdk.loaitailieu= #{loaiTaiLieu}
    </select>

    <select id="selectAttachedFileNameByTuanAndNam" resultMap="vn.worklife.user.util.file.service.FileUploadService.FileUploadBCSuCoVO">
        select ten,ISNULL(convert(nvarchar,ngaybc,103),'') as ngaybc from file_bchientrang WHERE tuan = #{tuan} and nam = #{nam} and idgroup = #{idGroup}
    </select>
</mapper>